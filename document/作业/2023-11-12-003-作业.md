# 作业

[toc]

## 一、作业一：细化作业

1、从解决方案架构的视角，把自己之前作业的内容，稍微细化一下。
如果内容很多，可以选择其中的一个点，进行深入作业。

### （1）需求和大致流程

需求：对产品性能故障数据进行自动化分析，并收集分析结论。

产品在使用的过程中，会产生性能故障数据，这些性能故障数据的下载信息每天会定时上报到Clickhouse数据库中。

要做的事情是，不断从clickhouse中取出未分析的数据信息，发给自动分析程序，并收集其分析的结论。

1. 自动分析程序是由其它项目组的同事开发并维护；
2. 自动分析程序在分析的过程中会产生XML文件和图片文件，需要保存起来并能关联访问到；
3. 根据Clickhouse中的数据信息，可以得到一个下载链接，可以下载一个zip文件，zip包中有一个加密文件，比较大，通过解码生成新文件，可以在网站上打开；

大致流程：

1. 一个SpringBoot服务，定时从Clickhouse读取为解析故障信息，发送到Kafka消息队列（fault_list）；
2. 自动分析程序，从kafka读取待解析的消息列表，进行解析。将解析过程中产生的XML、图片文件上传到归档服务器，并将解析结论发送到Kafka队列中（parse_result）；
3. 一个SpringBoot服务，读取解析结论，并将结论数据入库；
4. 基于入库的结论数据，前端服务（VUE+ElementUI）+SpringBoot服务，开发出可视化界面；

### （2）系统使用的各类技术，框架，以及组件，模块等

系统中：

1. 技术栈：Java、Python；
2. 框架：SpringBoot、MyBatis；
3. 组件：Kafka、Zookeeper、Nginx；
4. 模块：worker模块、Master模块 、可视化模块
   - worker模块：将待解析数据发送到Kafka；
   - Master模块：感知worker服务上下线，为worker分配任务、将解析结论入库
   - 可视化模块：对入库的解析结论信息，进行可视化展示；

## 二、作业二：使用4+1视图，深入优化

2、从系统架构视角，选择4+1视图中的部分内容，深入优化一下作业中的某一项

1. **系统的主要功能**：worker服务不断从clickhouse数据库中取出未分析的数据信息，发送到kafka消息队列fault_list中。自动分析服务从kafka的消息队列fault_list中读取要分析的消息，分析出结论，并将结论发送到kafka消息队列parse_result中；master服务从Kafka到parse_result消息队列中读取消息结论，并将解析结论写入到Mysql数据库中；可视化服务读取Mysql数据，以可视化方式将数据结论展示出来；
2. **参与者（Actors）**：worker服务、clickhouse数据库、kafka消息队列、自动分析程序、可视化服务；
3. **用例的描述**：
4. **用例之间的关系**：

3、思考自己的工作中，使用的设计文档跟这里讲的有什么差别。

