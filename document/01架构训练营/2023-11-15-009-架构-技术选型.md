# 架构的方法

[toc]

## 一、架构重点细节

人生没有白走的路，每一步都算数。

架构重点细节：技术对比进型，解决方案的制定，现状梳建与差距分析，遗留系统的分布式架构改造

### （1）技术选型

做**技术选型**本质是**技术决策**。

如何做决策：

> 影响项目周期、项目的成败。

通过投入产出比，做评估。当列的足够详情，就可以判断引入值不值得。

技术实现成本

- 是开源的，还是商业的？

技术升级成本

问题排查成本

代码维护成本

风险也是成本，要对风险进行评估。

技术选型归纳：

技术：包括语言、框架、工具、设计模式、开发模式等。取其长避其短；关注技术的发展前景。

适用于当前项目并且没有太明显短板。**技术的生命周期必须显著长于项目的生命周期**。

业务：业务初期，灵活、快速。业务发展期，可靠、健壮。业务成熟期，稳定、妥协。

人：独裁式决策，还是民主式决策。团队的基本能力问题。

### （2）技术选项的参考

1. ﻿﻿技术开放性（开源or闭源）：开源意味着，如果有一天你遇到了一个Bug，你至少还有机会通过修改源代码来迅速修复或规避这个Bug，解决你的系统火烧眉毛的问题，而不是束手无策地等待开发者不一定什么时候发布的下一个版本来解决
2. ﻿﻿开源社区是否活跃：大部分遇到的 Bug，其他人可能早就遇到并且修复了，你在使用过程中遇到的一些问题，也比较容易在社区或者通过搜索找到类似的问题和解决方案「学习和维护成本 」即使开源，如果实现的编程语言是相对非常冷门的语言，或者跟自身团队的主要技术栈不match，那么学习和维护成本也会比较高。
3. ﻿﻿与周边生态的集成和兼容：因为系统是由不同的部分组成的，不同部分需要相互交互和协同，因此不同部分的技术选型需要考虑互相的兼容性，比如Kafka和Flink 就有比较好的兼容性，Flink内置了Kafka的Data kource，使用Kafka就很容易作为Flink的数据源开发流计算应用
4. 对原有系统代码的侵入性：如果需要对原有系统代码做较大的改动，则可能会引入风险，进而会对业务造成影响。
5. ﻿﻿技术的边界：了解到足够的知识和经验，我们就知道很多边界在哪里，在边界内思考问题。
6. ﻿﻿最佳实践：积累了很多实践以后，我们选型会轻松很多。
7. ﻿﻿贴近最核心诉求，并且最好能有机会去验证核心场景。

### （3）技术选型的流程和步骤

1. 确定选型目标
2. 确认选型范围
3. 确认选型原则
4. 选择关键指标
5. 对比分析

> 列清单、拉表格

6. 选择核心场景
7. 搭建验证demo
8. 测试验证结果
9. 确认分析结果
10. 对技术项评分
11. 选择最高分数
12. 整理迭型文档

### （4）技术选型的示例

1、JDK的选择；

> 比如：JDK，建议使用JDK11

2、数据库的选择

3、Spring的选择

4、Hibernate还是MyBatis

5、缓存的选择

永远不要通过缓存来保证一致性。

### （5）技术选型的参考文档

能够自圆其说，并且需要有成熟的案例。





