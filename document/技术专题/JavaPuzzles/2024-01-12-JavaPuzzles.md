# 启发——java什么东西都是可变的

[toc]

1. Java为了性能做了很多的妥协；

   Java为了性能，所以缓存了一些常用的低位数字的Integer对象，降低CPU和内存占用；

   这么做的结果就是导致Integer在低位和高位时，表现不一样；

2. 更严重的看待这个问题，就是破坏了不可变性；

   导致Puzzle2里的这个看起来没有副作用的代码，产生了严重副作用，并且是JVM级的；

   如果这个hack方法运行在一个JVM里，执行一次，后续的所有整形对象5，都会错误变成7来用，特别是在UT（单元测试）里；

3. Java的语法糖：

   ```java
   Integer a = 3; // Integer a = Integer.valueOf(3);
   ```

   